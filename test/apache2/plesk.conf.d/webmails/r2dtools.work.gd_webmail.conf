#ATTENTION!
#
#DO NOT MODIFY THIS FILE BECAUSE IT WAS GENERATED AUTOMATICALLY,
#SO ALL YOUR CHANGES WILL BE LOST THE NEXT TIME THE FILE IS GENERATED.
<VirtualHost 127.0.0.1:7080>

	ServerName "webmail.r2dtools.work.gd"

	UseCanonicalName Off

	DocumentRoot "/usr/share/psa-roundcube"
	Alias /roundcube/ "/usr/share/psa-roundcube/"

	<IfModule mod_suexec.c>
		SuexecUserGroup roundcube_sysuser roundcube_sysgroup
	</IfModule>

	<IfModule mod_fcgid.c>
		FcgidInitialEnv PP_CUSTOM_PHP_CGI_INDEX "plesk-php83-fastcgi"
		FcgidInitialEnv PP_CUSTOM_PHP_INI "/etc/psa-webmail/roundcube/php.ini"
		FcgidMaxRequestLen 134217728
		<Directory "/usr/share/psa-roundcube">
			Options -Indexes +FollowSymLinks
			AllowOverride FileInfo AuthConfig Limit
			Require all granted
			Include "plesk.conf.d/roundcube.htaccess.inc"

			<Files ~ (\.php$)>
				SetHandler fcgid-script
				FCGIWrapper /var/www/cgi-bin/cgi_wrapper/cgi_wrapper .php
				Options +ExecCGI
			</Files>
		</Directory>
	</IfModule>

	#extension sslit begin

	RewriteEngine On

    # test comment
	RewriteCond %{REQUEST_URI} !^/\.well\-known/acme\-challenge/

    # test comment
	RewriteCond %{HTTPS} off

    # test comment
	RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,QSA]

	#extension sslit end
</VirtualHost>

<IfModule mod_ssl.c>
	<VirtualHost 127.0.0.1:7081>

		ServerName "webmail.r2dtools.work.gd"

		UseCanonicalName Off

		SSLEngine on
		SSLVerifyClient none
		SSLCertificateFile /opt/psa/var/certificates/cert9Jcn6w4

		DocumentRoot "/usr/share/psa-roundcube"
		Alias /roundcube/ "/usr/share/psa-roundcube/"

		<IfModule mod_suexec.c>
			SuexecUserGroup roundcube_sysuser roundcube_sysgroup
		</IfModule>

		<IfModule mod_fcgid.c>
			FcgidInitialEnv PP_CUSTOM_PHP_CGI_INDEX "plesk-php83-fastcgi"
			FcgidInitialEnv PP_CUSTOM_PHP_INI "/etc/psa-webmail/roundcube/php.ini"
			FcgidMaxRequestLen 134217728
			<Directory "/usr/share/psa-roundcube">
				Options -Indexes +FollowSymLinks
				AllowOverride FileInfo AuthConfig Limit
				Require all granted
				Include "plesk.conf.d/roundcube.htaccess.inc"

				<Files ~ (\.php$)>
					SetHandler fcgid-script
					FCGIWrapper /var/www/cgi-bin/cgi_wrapper/cgi_wrapper .php
					Options +ExecCGI
				</Files>
			</Directory>
		</IfModule>

		#extension sslit begin

		RewriteEngine On
		RewriteCond %{REQUEST_URI} !^/\.well\-known/acme\-challenge/
		RewriteCond %{HTTPS} off
		RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,QSA]

		#extension sslit end
	</VirtualHost>
</IfModule>
